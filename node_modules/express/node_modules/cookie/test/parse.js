
var assert = require('assert');

var cookie = require('..');

suite('parse');

test('basic', function() {
    assert.deepEqual({ foo: 'bar' ***REMOVED***, cookie.parse('foo=bar'));
    assert.deepEqual({ foo: '123' ***REMOVED***, cookie.parse('foo=123'));
***REMOVED***);

test('ignore spaces', function() {
    assert.deepEqual({ FOO: 'bar', baz: 'raz' ***REMOVED***,
            cookie.parse('FOO    = bar;   baz  =   raz'));
***REMOVED***);

test('escaping', function() {
    assert.deepEqual({ foo: 'bar=123456789&name=Magic+Mouse' ***REMOVED***,
            cookie.parse('foo="bar=123456789&name=Magic+Mouse"'));

    assert.deepEqual({ email: ' ",;/' ***REMOVED***,
            cookie.parse('email=%20%22%2c%3b%2f'));
***REMOVED***);

test('ignore escaping error and return original value', function() {
    assert.deepEqual({ foo: '%1', bar: 'bar' ***REMOVED***, cookie.parse('foo=%1;bar=bar'));
***REMOVED***);

test('ignore non values', function() {
    assert.deepEqual({ foo: '%1', bar: 'bar' ***REMOVED***, cookie.parse('foo=%1;bar=bar;HttpOnly;Secure'));
***REMOVED***);

test('unencoded', function() {
    assert.deepEqual({ foo: 'bar=123456789&name=Magic+Mouse' ***REMOVED***,
            cookie.parse('foo="bar=123456789&name=Magic+Mouse"',{
                decode: function(value) { return value; ***REMOVED***
            ***REMOVED***));

    assert.deepEqual({ email: '%20%22%2c%3b%2f' ***REMOVED***,
            cookie.parse('email=%20%22%2c%3b%2f',{
                decode: function(value) { return value; ***REMOVED***
            ***REMOVED***));
***REMOVED***)
